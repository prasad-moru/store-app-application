apiVersion: v1
kind: Pod
metadata:
  name: stress-test
  namespace: monitoring
  labels:
    app: stress-test
    purpose: alert-testing
spec:
  containers:
  - name: cpu-stress
    image: progrium/stress
    resources:
      requests:
        cpu: "100m"      # Request only 100m CPU
        memory: "50Mi"   # Request only 50Mi memory
      limits:
        cpu: "500m"      # But allow up to 500m
        memory: "200Mi"  # And up to 200Mi
    command: ["stress"]
    args:
      - "--cpu"
      - "1"           # Use 1 CPU core (will exceed 100m request)
      - "--io"
      - "1"
      - "--vm"
      - "1"
      - "--vm-bytes"
      - "100M"        # Use 100M memory (exceeds 50Mi request)
      - "--timeout"
      - "600s"        # Run for 10 minutes
---
apiVersion: v1
kind: Pod
metadata:
  name: memory-stress
  namespace: monitoring
  labels:
    app: memory-stress
    purpose: alert-testing
spec:
  containers:
  - name: memory-hog
    image: polinux/stress
    resources:
      requests:
        cpu: "50m"
        memory: "100Mi"    # Request 100Mi
      limits:
        cpu: "200m"
        memory: "500Mi"
    command: ["stress"]
    args:
      - "--vm"
      - "1"
      - "--vm-bytes"
      - "150M"            # Use 150M (exceeds 100Mi request by 50%)
      - "--vm-hang"
      - "1"
      - "--timeout"
      - "600s"